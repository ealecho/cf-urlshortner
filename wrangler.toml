name = "url-shortener"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

[build]
command = "zig build"

[[rules]]
type = "CompiledWasm"
globs = ["**/*.wasm"]
fallthrough = false

# KV Namespace for caching (fast redirects)
[[kv_namespaces]]
binding = "URL_CACHE"
id = "67ac1f5d1d0141e39925b75cc0aec91d"
# For local dev: preview_id = "your-preview-kv-id"

# D1 Database for persistence
[[d1_databases]]
binding = "URL_DB"
database_name = "url-shortener-db"
database_id = "9187e8db-97e2-44cf-80bd-870bf7807123"
